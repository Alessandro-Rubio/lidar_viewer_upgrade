<!-- src/app/app.html -->
<div class="app-container">
  <header class="app-header">
    <div class="header-content">
      <div class="title-section">
        <h1>Lidar Viewer</h1>
        <p class="status" [class.connected]="connectionStatus === 'connected'" [class.error]="connectionStatus === 'error'">
          Estado: <strong>{{ connectionStatus }}</strong>
        </p>
      </div>

      <div class="controls">
        <button (click)="connectStream()" [disabled]="isLoading">ðŸ”Œ Conectar</button>
        <button (click)="disconnect()">ðŸ”´ Desconectar</button>
        <button (click)="resetApplication()">ðŸ”„ Reiniciar</button>
      </div>
    </div>

    <div class="stats">
      <div *ngIf="isLoading" class="loading-note">
        <loading-spinner></loading-spinner>
        <span>Cargando datos del servidorâ€¦</span>
      </div>

      <div *ngIf="!isLoading">
        <div>Archivos buffered: {{ stats.files }}</div>
        <div>Puntos (estimado): {{ stats.points || 'â€”' }}</div>
      </div>
    </div>
  </header>

  <main class="app-main">
    <section class="content">
      <div *ngIf="pointCloudData.length === 0 && !isLoading" class="empty-state">
        <h2>No hay datos para mostrar</h2>
        <p>ConÃ©ctate al backend y espera a que el servidor complete el procesamiento.</p>
      </div>

      <point-cloud-viewer
        *ngIf="pointCloudData.length > 0"
        [pointCloudData]="pointCloudData">
      </point-cloud-viewer>
    </section>
  </main>
</div>
